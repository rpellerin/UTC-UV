\chapter{Correction orthographique}\label{corr}

\java
\begin{lstlisting}
/**
 * Essaye de détecter une inversion et corrige un score de Levenshtein
 * @param word Le mot pour lequel on cherche un lemme
 * @param comparedTo Le lemme potentiel
 * @param score Le score de Levenshtein obtenu pour ces deux mots
 * @return Le nouveau score pondéré
 */
private double testInversions(String word,String comparedTo, int score){
	double newScore = (double) score;
	switch (score) {
	case 0:
		return (double)0;
	default:
		break;
	}

	boolean problem = false;
	for (int i = 0; i < word.length() && i < comparedTo.length(); i++) {
		if (word.charAt(i) == comparedTo.charAt(i))
			continue;
		else if (!problem) {
			problem = true;
			if (i + 1 < comparedTo.length() && word.charAt(i) != comparedTo.charAt(i+1)) {
				break;
			}
		}
		else if (problem) {
			if (word.charAt(i) == comparedTo.charAt(i - 1)) {
				problem = false;
				// C'était une inversion
			}
			else {
				break;
			}
		}
	}
	newScore = !problem && word.length() == comparedTo.length() ?
			0
			:
			(word.length() == comparedTo.length() ?
						newScore - 0.1
						:
							newScore);

	return newScore;
}
\end{lstlisting}

